import os, sys
sys.path.insert(0, os.path.dirname(__file__))

import streamlit as st
from predict_level import predict_levels

st.set_page_config(page_title="French Level Predictor")
st.title("ãƒ•ãƒ©ãƒ³ã‚¹èª å˜èªãƒ¬ãƒ™ãƒ«äºˆæ¸¬å™¨")

# â”€â”€â”€ ã‚¯ãƒªã‚¢ç”¨ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
def clear_input():
    st.session_state["input_text"] = ""

# â”€â”€â”€ ãƒ†ã‚­ã‚¹ãƒˆå…¥åŠ› â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# key="input_text" ã‚’æŒ‡å®š
text = st.text_input("ãƒ•ãƒ©ãƒ³ã‚¹èªã®å˜èªã‚’å…¥åŠ›ã—ã¦ãã ã•ã„", key="input_text")

# â”€â”€â”€ ã‚¯ãƒªã‚¢ãƒœã‚¿ãƒ³ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# on_click ã§ clear_input ã‚’å‘¼ã³å‡ºã™
st.button("ã‚¯ãƒªã‚¢", on_click=clear_input)

# â”€â”€â”€ äºˆæ¸¬ãƒœã‚¿ãƒ³ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
if st.button("ãƒ¬ãƒ™ãƒ«ã‚’äºˆæ¸¬"):
    # ç©ºå…¥åŠ›ãƒã‚§ãƒƒã‚¯
    if not st.session_state.input_text.strip():
        st.warning("å˜èªã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚")
    else:
        # ã‚¹ãƒ”ãƒŠãƒ¼ã‚’å›ã—ãªãŒã‚‰äºˆæ¸¬
        with st.spinner("ğŸ”„ åˆ¤å®šä¸­â€¦"):
            level = predict_levels([st.session_state.input_text.strip()])[0]
        # çµæœã‚’è¡¨ç¤º
        st.success(f"äºˆæ¸¬ãƒ¬ãƒ™ãƒ«: {level}")
